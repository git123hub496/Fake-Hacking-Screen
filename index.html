<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hacking Terminal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ff66">

<link rel="icon" href="favicon.png">
<link rel="apple-touch-icon" href="favicon.png">

<style>
:root{
  --bg: radial-gradient(circle at top,#001a00,#000);
  --fg:#00ff66;
  --border:#00ff66;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:monospace;
}

#header{
  text-align:center;
  padding:12px;
  font-size:22px;
  border-bottom:2px solid var(--border);
}

#terminal{
  height:70vh;
  padding:10px;
  overflow-y:auto;
  white-space:pre-wrap;
  font-size:18px; /* mobile readable */
}

#inputBar{
  border-top:2px solid var(--border);
  padding:10px;
}

#cmd{
  width:100%;
  background:black;
  color:var(--fg);
  border:none;
  outline:none;
  font-size:18px;
  font-family:monospace;
}
</style>
</head>

<body>

<div id="header">Hacking Terminal</div>
<div id="terminal"></div>
<div id="inputBar">
  <input id="cmd" placeholder="booting..." disabled>
</div>

<script>
const terminal = document.getElementById("terminal");
const input = document.getElementById("cmd");
const header = document.getElementById("header");

/* ================= STATE ================= */
let booting = true;
let username = "user";
let isAdmin = false;
let waitingName = true;
let locked = true;
let waitingPass = false;

let connected = null;
let hacking = false;
let hackProgress = 0;

const PASSWORD = "access123";

/* NETWORK */
const computers = {
  "office-pc": ["emails.txt","budget.xls"],
  "security-node": ["cams.log","doors.cfg"],
  "space-link": ["telemetry.bin","coords.dat"]
};

/* ================= UTILS ================= */
function print(t){
  terminal.textContent += t + "\n";
  terminal.scrollTop = terminal.scrollHeight;
}
function prompt(){
  return (isAdmin ? "ADMIN" : username) + (connected ? "@"+connected : "@terminal") + "> ";
}

/* ================= BOOT ================= */
const bootLines = [
  "Booting Hacking Terminal...",
  "Loading kernel...",
  "Initializing network...",
  "System ready."
];
let bootStep = 0;

function boot(){
  if(bootStep < bootLines.length){
    print(bootLines[bootStep++]);
    setTimeout(boot, 500);
  } else {
    booting = false;
    input.disabled = false;
    input.placeholder = "type command...";
    print("");
    print("SYSTEM ONLINE");
    print("Enter username: name <yourname>");
  }
}
boot();

/* ================= INPUT ================= */
input.addEventListener("keydown", e=>{
if(e.key !== "Enter" || booting) return;

const raw = input.value.trim();
input.value = "";
if(!raw) return;

const cmd = raw.toLowerCase();
print(prompt() + raw);

/* NAME */
if(waitingName){
  if(cmd.startsWith("name ")){
    username = raw.slice(5);
    waitingName = false;

    if(username.toLowerCase() === "admin"){
      isAdmin = true;
      header.textContent = "ADMIN Hacking Terminal";
      document.title = "Admin Hacking Terminal";
      print("ADMIN MODE ENABLED");
    }

    print("Welcome " + username);
    print("Type unlock");
  }
  return;
}

/* UNLOCK */
if(cmd === "unlock"){
  waitingPass = true;
  print("password <password>");
  return;
}
if(waitingPass){
  if(cmd.startsWith("password ")){
    if(raw.slice(9) === PASSWORD){
      locked = false;
      waitingPass = false;
      print("ACCESS GRANTED");
      print("Type help");
    } else {
      print("ACCESS DENIED");
    }
  }
  return;
}
if(locked){
  print("TERMINAL LOCKED");
  return;
}

/* ================= COMMANDS ================= */

if(cmd === "help"){
  print("help, clear, status");
  print("computers, connect <name>");
  print("network map");
  print("hack, progress");
  if(isAdmin){
    print("ADMIN: hack terminal <target>, beat");
  }
  return;
}

if(cmd === "clear"){
  terminal.textContent = "";
  return;
}

if(cmd === "status"){
  print("CONNECTED: " + (connected || "NONE"));
  print("HACKING: " + (hacking ? "YES" : "NO"));
  return;
}

/* COMPUTERS */
if(cmd === "computers"){
  print("Available computers:");
  Object.keys(computers).forEach(c => print("- " + c));
  return;
}

if(cmd.startsWith("connect ")){
  const c = raw.slice(8);
  if(!computers[c]){
    print("Computer not found");
  } else {
    connected = c;
    print("Connected to " + c);
    print("Files:");
    computers[c].forEach(f => print(" - " + f));
  }
  return;
}

/* NETWORK MAP */
if(cmd === "network map"){
  print("NETWORK MAP:");
  print("[terminal]");
  Object.keys(computers).forEach(c => print("  └─ " + c));
  return;
}

/* HACK */
if(cmd === "hack"){
  if(!connected){
    print("Not connected to any computer");
    return;
  }
  hacking = true;
  hackProgress = 0;
  print("Hacking " + connected + "...");
  return;
}

if(cmd === "progress"){
  if(!hacking){
    print("No hack in progress");
    return;
  }
  hackProgress += 25;
  print("Progress: " + hackProgress + "%");
  if(hackProgress >= 100){
    hacking = false;
    print("HACK COMPLETE");
  }
  return;
}

/* ================= ADMIN ================= */
if(isAdmin && cmd.startsWith("hack terminal ")){
  const target = raw.slice(14);
  print("HACKING TERMINAL: " + target.toUpperCase());
  setTimeout(()=>print("ACCESS GRANTED"),800);
  return;
}

if(isAdmin && cmd === "beat"){
  terminal.textContent = "";
  print("=========== YOU WON ===========");
  print("ALL SYSTEMS COMPROMISED");
  return;
}

/* ================= UNKNOWN ================= */
print("UNKNOWN COMMAND");
});

/* SERVICE WORKER */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
